<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>GNB + 검색</title>
<style>
    *{box-sizing:border-box}

    /* ===== GNB (상단 드롭다운) ===== */
    #gnbFull{background:#1b1f26}
    #gnbFull .inner{max-width:1200px;margin:0 auto}
    #gnbFull .menu-list{display:flex;align-items:center;gap:24px;height:56px;margin:0;padding:0;list-style:none}
    #gnbFull .menu-item{position:relative}
    #gnbFull .menu-item>a{display:block;padding:0 8px;line-height:56px;color:#fff;text-decoration:none;font-weight:600;transition:color .2s ease}
    #gnbFull .menu-item.on>a{color:#4fc3f7}

    /* 2뎁스: CSS 전용 전환(디스플레이 토글 안 씀) */
    #gnbFull .menu-sub{
        /* 보이기/숨기기 기본 상태 (항상 flex 유지) */
        display:flex;             /* ← flex 고정 */
        position:absolute;left:0;top:56px;z-index:20;
        background:#fff;border:1px solid #e5e7eb;border-radius:10px;
        padding:16px;gap:16px;min-width:240px;
        box-shadow:0 8px 24px rgba(0,0,0,.08);

        /* 전환 대상 */
        max-height:0;             /* 닫힘 */
        opacity:0;
        transform:translateY(8px) scaleY(.98);
        transform-origin:top;
        visibility:hidden;
        overflow:hidden;
        pointer-events:none;

        transition:
          max-height .28s ease,
          opacity .22s ease,
          transform .28s ease,
          visibility 0s linear .28s; /* 닫힐 때 끝나고 hidden 반영 */
        will-change: max-height, opacity, transform;
    }
    /* 열림 상태 */
    #gnbFull .menu-item.on > .menu-sub{
        max-height:520px;         /* 메뉴 높이에 맞게 넉넉히 */
        opacity:1;
        transform:translateY(0) scaleY(1);
        visibility:visible;
        pointer-events:auto;
        transition:
          max-height .32s ease,
          opacity .18s ease,
          transform .32s ease,
          visibility 0s;
    }

    #gnbFull .menu-sub ul{list-style:none;margin:0;padding:0}
    #gnbFull .menu-sub li a{display:block;padding:8px 10px;color:#111;text-decoration:none;border-radius:6px}
    #gnbFull .menu-sub li a:hover,#gnbFull .menu-sub li a:focus{background:#eef6ff;outline:none}

    /* 모션 최소화 사용자 설정 존중 */
    @media (prefers-reduced-motion: reduce){
      #gnbFull .menu-sub{
        transition:none;
        transform:none;
      }
      #gnbFull .menu-item.on > .menu-sub{
        transition:none;
        transform:none;
      }
    }

    /* ===== 검색창 ===== */
    #header_2{display:flex;height:160px}
    #search-form{position:relative;display:flex;gap:16px;width:40%;height:40%;margin:auto}
    #search-text{width:100%}
    #search-text input{border:2px solid #2c5ae9;font-size:18px; padding:0 16px;}
    #search-form input{width:100%;height:100%;border-radius:30px}
    #search-form input:focus,#search-form input:hover{outline:2px solid rgb(0,162,255);transition:.3s}
    #search-btn{position:absolute;width:50px;height:90%;right:16px;top:50%;transform:translateY(-50%)}
    #search-btn input{background:#fff;border:none;font-size:0;cursor:pointer}
    #search-btn input:hover{opacity:.8;transition:.3s}
    .mask-image::after{
        position:absolute;content:'';width:20px;height:20px;top:50%;left:50%;transform:translate(-50%,-50%);
        -webkit-mask-image:url(resources/image/ico_search.svg);mask-image:url(resources/image/ico_search.svg);
        -webkit-mask-size:20px auto;mask-size:20px auto;
        -webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;
        -webkit-mask-position:center;mask-position:center;
        background-color:#2c5ae9; /* 아이콘 색 */
    }
</style>
</head>
<body>
    <!-- ===== GNB ===== -->
    <nav id="gnbFull" aria-label="주요 메뉴">
        <div class="inner">
        <ul class="menu-list" role="menubar">
            <li class="menu-item" role="none">
            <a href="#" role="menuitem" aria-haspopup="true" aria-expanded="false">회사소개</a>
            <div class="menu-sub" role="menu" aria-label="회사소개 하위메뉴">
                <ul>
                <li><a href="#">인사말</a></li>
                <li><a href="#">연혁</a></li>
                <li><a href="#">오시는 길</a></li>
                </ul>
            </div>
            </li>
            <li class="menu-item" role="none">
            <a href="#" role="menuitem" aria-haspopup="true" aria-expanded="false">제품</a>
            <div class="menu-sub" role="menu" aria-label="제품 하위메뉴" style="min-width:320px;">
                <ul>
                <li><a href="#">AI 서비스</a></li>
                <li><a href="#">클라우드</a></li>
                <li><a href="#">보안 솔루션</a></li>
                </ul>
                <ul>
                <li><a href="#">가격 안내</a></li>
                <li><a href="#">도입 사례</a></li>
                </ul>
            </div>
            </li>
            <li class="menu-item" role="none">
            <a href="#" role="menuitem" aria-haspopup="true" aria-expanded="false">고객지원</a>
            <div class="menu-sub" role="menu" aria-label="고객지원 하위메뉴">
                <ul>
                <li><a href="#">공지사항</a></li>
                <li><a href="#">자료실</a></li>
                <li><a href="#">문의하기</a></li>
                </ul>
            </div>
            </li>
            <li class="menu-item" role="none">
            <a href="#" role="menuitem">블로그</a>
            </li>
        </ul>
        </div>
    </nav>

    <!-- ===== 검색창 ===== -->
    <div id="header_2">
        <form action="search.kh" method="get" id="search-form" aria-label="사이트 검색">
        <div id="search-text">
            <input type="text" name="query" placeholder="궁금하신게 있으신가요~~?"/>
        </div>
        <div id="search-btn" class="mask-image">
            <input type="submit" value="검색" aria-label="검색"/>
        </div>
        </form>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    var items = document.querySelectorAll('#gnbFull .menu-item');

    function openItem(item) {
        closeAll();
        item.classList.add('on');
        var link = item.querySelector('a');
        if (link) link.setAttribute('aria-expanded', 'true');
        // CSS 전환 사용 → display 제어 제거
        // var sub  = item.querySelector('.menu-sub');
        // if (sub) sub.style.display = 'flex';
    }

    function closeItem(item) {
        item.classList.remove('on');
        var link = item.querySelector('a');
        if (link) link.setAttribute('aria-expanded', 'false');
        // CSS 전환 사용 → display 제어 제거
        // var sub  = item.querySelector('.menu-sub');
        // if (sub) sub.style.display = 'none';
    }

    function closeAll() {
        var opened = document.querySelectorAll('#gnbFull .menu-item.on');
        for (var i = 0; i < opened.length; i++) closeItem(opened[i]);
    }

    for (var i = 0; i < items.length; i++) {
        (function (item) {
            var link = item.querySelector('a');

            // 마우스
            item.addEventListener('mouseenter', function () { openItem(item); });
            item.addEventListener('mouseleave', function () { closeItem(item); });

            // 키보드
            if (link) {
                link.addEventListener('focus', function () { openItem(item); });
            }
        })(items[i]);
    }

    // 내비 밖으로 포커스 이동/ESC 시 닫기
    document.addEventListener('focusin', function (e) {
        if (!e.target.closest || !e.target.closest('#gnbFull')) closeAll();
    });
    document.addEventListener('keydown', function (e) {
      if (e.keyCode === 27) closeAll(); // ESC
    });
});
</script>

</body>
</html>
